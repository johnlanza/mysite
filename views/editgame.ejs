<h1>Update Game</h1>

<style>
  /* Make game form labels match the smaller book-form label size */
  section.game-form label {
    font-size: 1.2rem;
    font-weight: 400;
  }
</style>

<section class="game-form">
  <% if (typeof errorMessage !== "undefined" && errorMessage) { %>
  <p style="color: red; font-weight: bold; margin-bottom: 20px">
    <%= errorMessage %>
  </p>
  <% } %>

  <form
    action="/games/<%= game._id %>?_method=PUT"
    method="post"
    enctype="multipart/form-data">
    <div>
      <label for="title">Title</label>
      <p>
        <input
          type="text"
          id="title"
          class="form-control"
          value="<%= game.title %>"
          name="game[title]"
          required
          autofocus />
      </p>
    </div>

    <div>
      <label for="tagline">Tagline (short line under title)</label>
      <p>
        <input
          type="text"
          id="tagline"
          class="form-control"
          value="<%= game.tagline || '' %>"
          name="game[tagline]" />
      </p>
    </div>

    <div>
      <label for="bestFor">Best for</label>
      <p>
        <input
          type="text"
          id="bestFor"
          class="form-control"
          value="<%= game.bestFor || '' %>"
          name="game[bestFor]" />
      </p>
    </div>

    <div>
      <label for="players">Players</label>
      <p>
        <input
          type="text"
          id="players"
          class="form-control"
          value="<%= game.players || '' %>"
          name="game[players]" />
      </p>
    </div>

    <div class="form-row">
      <div class="col">
        <label for="playTime">Play time</label>
        <p>
          <input
            type="text"
            id="playTime"
            class="form-control"
            value="<%= game.playTime || '' %>"
            name="game[playTime]" />
        </p>
      </div>

      <div class="col">
        <label for="teachTime">Teach time</label>
        <p>
          <input
            type="text"
            id="teachTime"
            class="form-control"
            value="<%= game.teachTime || '' %>"
            name="game[teachTime]" />
        </p>
      </div>
    </div>

    <div class="form-row">
      <div class="col">
        <label for="energy">Energy</label>
        <p>
          <input
            type="text"
            id="energy"
            class="form-control"
            value="<%= game.energy || '' %>"
            name="game[energy]" />
        </p>
      </div>

      <div class="col">
        <label for="brainSpace">Brain space</label>
        <p>
          <input
            type="text"
            id="brainSpace"
            class="form-control"
            value="<%= game.brainSpace || '' %>"
            name="game[brainSpace]" />
        </p>
      </div>

      <div class="col">
        <label for="spiceLevel">Spice</label>
        <p>
          <input
            type="text"
            id="spiceLevel"
            class="form-control"
            value="<%= game.spiceLevel || '' %>"
            name="game[spiceLevel]" />
        </p>
      </div>
    </div>

    <div>
      <label for="why">Why I keep this on my shelf</label>
      <p>
        <textarea id="why" class="form-control" name="game[why]" rows="3">
<%= game.why || '' %></textarea
        >
      </p>
    </div>

    <div>
      <label for="whenToSkip">When to skip it</label>
      <p>
        <textarea
          id="whenToSkip"
          class="form-control"
          name="game[whenToSkip]"
          rows="2">
<%= game.whenToSkip || '' %></textarea
        >
      </p>
    </div>

    <div>
      <label for="howToPitch">How to pitch it to your group</label>
      <p>
        <input
          type="text"
          id="howToPitch"
          class="form-control"
          value="<%= game.howToPitch || '' %>"
          name="game[howToPitch]" />
      </p>
    </div>

    <div>
      <label for="additionalNotes">Additional notes</label>
      <p>
        <textarea
          id="additionalNotes"
          class="form-control"
          name="game[additionalNotes]"
          rows="2">
<%= game.additionalNotes || '' %></textarea
        >
      </p>
    </div>

    <div>
      <label for="conversationSpark">Conversation spark</label>
      <p>
        <textarea
          id="conversationSpark"
          class="form-control"
          name="game[conversationSpark]"
          rows="2">
<%= game.conversationSpark || '' %></textarea
        >
      </p>
    </div>

    <div>
      <label for="notes">Extra notes (HTML allowed)</label>
      <p>
        <textarea id="notes" class="form-control" name="game[notes]" rows="4">
<%= game.notes || '' %></textarea
        >
      </p>
    </div>

    <div>
      <label for="link">External link (publisher, BGG, etc.)</label>
      <p>
        <input
          type="url"
          id="link"
          class="form-control mb-3"
          value="<%= game.link || '' %>"
          name="game[link]" />
      </p>
    </div>

    <div>
      <% if (game.imageUrl) { %>
      <p>Current Image:</p>
      <img
        src="<%= game.imageUrl %>"
        alt="<%= game.title %> image"
        style="max-width: 180px; height: auto; margin-bottom: 10px" />
      <% } %>

      <label for="image">Replace Game Image (optional)</label>
      <p>
        <input type="file" id="image" name="image" accept="image/*" />
      </p>
      <p>New images will be resized to a standard box size.</p>
    </div>

    <button class="btn btn-secondary" type="submit">Update Game</button>
  </form>
</section>
