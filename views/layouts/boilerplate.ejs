<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/images/favicon.png" type="image/png" />

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />

    <link
      href="https://fonts.cdnfonts.com/css/apple-garamond"
      rel="stylesheet" />

    <link
      href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap"
      rel="stylesheet" />

    <link rel="stylesheet" href="/css/app.css" />
    <link
      href="https://cdn.quilljs.com/1.3.7/quill.snow.css"
      rel="stylesheet" />

    <title>John Lanza</title>

    <style>
      nav.simple-nav {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        margin-bottom: 1.5rem;
      }

      nav.simple-nav a {
        margin-right: 20px;
        font-size: 1.1rem;
        text-decoration: none;
        color: #333;
        font-family: "Lexend", sans-serif;
      }

      nav.simple-nav a:hover {
        text-decoration: underline;
      }

      /* ----- MOBILE STACKING ----- */
      @media (max-width: 600px) {
        nav.simple-nav {
          flex-direction: column;
          align-items: flex-start;
        }

        nav.simple-nav a {
          margin: 6px 0;
        }
      }
    </style>
  </head>

  <body class="d-flex flex-column vh-100">
    <div class="container mt-5 px-3">
      <div class="row align-items-center">
        <div class="col">
          <!-- SITE HEADER -->
          <h1>
            <a href="/" class="main-header">John Lanza</a>
          </h1>

          <!-- SIMPLE TOP NAV (now responsive) -->
          <nav class="simple-nav">
            <a href="/books">Book Summaries</a>
            <a href="/events">Timeline</a>
            <a href="/#books-written">Writing</a>
            <a
              href="https://category6consulting.com/speaker/john-lanza/"
              target="_blank">
              Speaking
            </a>
            <a href="/games">Games</a>
            <a href="#" id="colors-link">Colors</a>
          </nav>

          <!-- FLASH MESSAGES -->
          <% if (success && success.length > 0) { %>
          <div
            class="alert alert-success alert-dismissible fade show"
            role="alert">
            <%= success %>
            <button type="button" class="close" data-dismiss="alert">
              <span>&times;</span>
            </button>
          </div>
          <% } %> <% if (error && error.length > 0) { %>
          <div
            class="alert alert-danger alert-dismissible fade show"
            role="alert">
            <%= error %>
            <button type="button" class="close" data-dismiss="alert">
              <span>&times;</span>
            </button>
          </div>
          <% } %> <%- body %>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <script>
      (function () {
        const TOTAL_PALETTES = 4; // 0 = warm, 1 = cool, 2 & 3 = new palettes
        const STORAGE_KEY = "sitePaletteIndex";

        function applyPalette(index) {
          document.documentElement.setAttribute("data-palette", String(index));
        }

        function loadInitialPalette() {
          try {
            const raw = localStorage.getItem(STORAGE_KEY);
            const saved = parseInt(raw, 10);

            if (!Number.isNaN(saved) && saved >= 0 && saved < TOTAL_PALETTES) {
              applyPalette(saved);
              return saved;
            }
          } catch (e) {
            // ignore localStorage issues
          }

          applyPalette(0);
          return 0;
        }

        document.addEventListener("DOMContentLoaded", function () {
          let current = loadInitialPalette();

          const link = document.getElementById("colors-link");
          if (!link) return;

          link.addEventListener("click", function (event) {
            event.preventDefault();
            current = (current + 1) % TOTAL_PALETTES;
            applyPalette(current);

            try {
              localStorage.setItem(STORAGE_KEY, String(current));
            } catch (e) {
              // ignore storage errors
            }
          });
        });
      })();
    </script>
  </body>
</html>
